- name: Generate Pages
        run: |
          mkdir -p benchmark
          template=$(cat benchmark/template.html)
          
          # This updated loop handles spaces in descriptions correctly
          jq -c '.[]' data/vendors.json | while read -r vendor; do
            id=$(echo "$vendor" | jq -r '.id')
            name=$(echo "$vendor" | jq -r '.name')
            logo=$(echo "$vendor" | jq -r '.logo')
            summary=$(echo "$vendor" | jq -r '.summary')
            website=$(echo "$vendor" | jq -r '.website')
            base=$(echo "$vendor" | jq -r '.pricing.base_price')
            per=$(echo "$vendor" | jq -r '.pricing.per_employee')
            notes=$(echo "$vendor" | jq -r '.pricing.notes')
            features=$(echo "$vendor" | jq -r '.features[]' | sed 's/^/<li>/' | sed 's/$/<\/li>/' | tr '\n' ' ')
            
            page="$template"
            page="${page//\{\{id\}\}/$id}"
            page="${page//\{\{name\}\}/$name}"
            page="${page//\{\{logo\}\}/$logo}"
            page="${page//\{\{summary\}\}/$summary}"
            page="${page//\{\{website\}\}/$website}"
            page="${page//\{\{base_price\}\}/$base}"
            page="${page//\{\{per_employee\}\}/$per}"
            page="${page//\{\{notes\}\}/$notes}"
            page="${page//\{\{features_list\}\}/$features}"
            
            echo "$page" > "benchmark/${id}.html"
          done
